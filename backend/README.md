# Backend:

All steps in this section should be run from the `backend` directory. `cd backend`

## Downloading the data manually

_Warning_: The data file called plots.gml has to be in a directory `data`

```bash
mkdir data && cd data
wget https://bip.geopoz.poznan.pl/download/119/8781/dzialkiewidencyjnestannadzien19102023.zip
7z x dzialkiewidencyjnestannadzien19102023.zip
mv EGiB.GML_209424_2023_10_19_wybrane.gml plots.gml

wget https://bip.geopoz.poznan.pl/download/119/8782/budynkiewidencyjnestannadzien19102023.zip
7z x budynkiewidencyjnestannadzien19102023.zip
mv EGiB.GML_209415_2023_10_19_wybrane.gml buildings.gml
```

## Development

The docs autogenerated by FastAPI are available at http://127.0.0.1:8080/docs

```bash
sudo apt install python3 python3.10-venv
python3 -m venv venv
source venv/bin/activate
pip3 install -r requirements.txt
uvicorn app.main:app --host 127.0.0.1 --port 8080 --reload
```

## Usage

To build an image:
`docker build -t building-plot-search .`

To run the app on port 8080 run:
`docker run -d --name mycontainer -v ./data:/code/data -p 8080:80 building-plot-search`

To pull image from docker hub
`docker pull bbqdocker/building_plot_search:latest`
